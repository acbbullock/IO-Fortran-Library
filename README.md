# IO Fortran Library

The IO Fortran Library is a Fortran module `io_fortran_lib` which provides high level routines for doing internal and external I/O. In particular, the module provides a handful of generic interfaces and a simple derived type for string-based and array-based I/O that are useful for recording program data, reading data into programs, and for writing formatted logs and output. For instance, one may read and write data from/to `.csv` and `.dat` files, represent numbers as strings inside of a string expression, efficiently stream text data to a `.log` file, and perform advanced character manipulations with a `String` type.

To use `io_fortran_lib` with your [fpm](https://github.com/fortran-lang/fpm) project, add the following lines to your `fpm.toml` file and `use` the module in your program units to access the routines:

```toml
[dependencies]
IO-Fortran-Library = { git="https://github.com/acbbullock/IO-Fortran-Library", branch="main" }
```

The module is fully self-contained, with no external dependencies, and is written to be portable and compliant to the Fortran 2018 standard such that no special extensions or compiler options should be required. The public interfaces accept all intrinsic numeric types (`integer`, `real`, and `complex`) and all standard kinds provided by the intrinsic `iso_fortran_env` module (`int8`, `int16`, `int32`, `int64`, `real32`, `real64`, and `real128`). All array-based routines additionally support up to rank 15.

## Documentation

The API documentation for this project was generated by [FORD](https://github.com/Fortran-FOSS-Programmers/ford) (the Fortran documentation generator) and is available at [API documentation](https://acbbullock.github.io/IO-Fortran-Library/doc/index.html). To view the documentation locally, clone this repository and view `/doc/index.html` in your browser.

The following links to the documentation provide user instructions for each of the public interfaces:

* [str](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/str.html): Function for representing a scalar number as a `character` string.
* [cast](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/cast.html): Subroutine for casting a scalar `character` string into a number.
* [String](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/string.html): Function for transforming numeric or `character` data into a [String](https://acbbullock.github.io/IO-Fortran-Library/doc/type/string.html) type.
* [cast_string](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/cast_string.html): Subroutine for casting a `String` type into a number.
* [to_file](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/to_file.html): Subroutine for writing an array of uniform data type to an external file.
* [from_file](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/from_file.html): Subroutine for reading an external file of uniform numeric data type **and** format into an array.
* [echo](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/echo.html): Subroutine for streaming scalar `character` data to an external text file.
* [aprint](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/aprint.html): Subroutine for printing arrays and array sections to stdout.
* [String methods](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/string-methods.html): Type-bound procedures for [String](https://acbbullock.github.io/IO-Fortran-Library/doc/type/string.html).
* [Operators](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/operators.html): Extended operators for convenient string manipulations.

See the [important user information](https://acbbullock.github.io/IO-Fortran-Library/doc/page/UserInfo/index.html) and [reference guide](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/index.html) for information about calling the routines, and further see the [tutorials](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Examples/index.html) for complete example programs.

## Release Notes v1.2.0

### New features

* The `String` type has been greatly extended and can now serve as an interface for advanced I/O and character manipulations. See the references for [type-bound procedures](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/string-methods.html) and the [tutorials](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Examples/index.html) for more information.
* New constants have been added for public use to facilitate file I/O on a variety of platforms.
* New interface [String](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/string.html) for an `elemental` version of `str` with a return type of `String`.
* New interfaces [cast](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/cast.html) and [cast_string](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/cast_string.html) for casting `character` and `String` data into numeric variables.
* New [operator interfaces](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/operators.html) for advanced internal character manipulations involving the intrinsic `character` data type and the derived-type `String`.

### Added

* [echo](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/echo.html) now accepts an additional `optional` argument `terminator`: a `character` value of any length which is used to terminate the input string. The default terminator is the line feed character `LF`, which is identical to previous behavior.
* Test programs have been added in `/test`, which are all passing with the following configurations:
  * GNU Fortran Compiler v11.3.0 on Linux
  * Intel Fortran Compiler v2023.0.0 on Linux
  * Intel Fortran Compiler Classic v2021.8.0 on Linux
  * GNU Fortran Compiler v11.2.0 on Windows 11
  * Intel Fortran Compiler v2023.0.0 on Windows 11
  * Intel Fortran Compiler Classic v2021.8.0 on Windows 11

### Improved

* Removed vertical bars in [aprint](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/aprint.html) which were displayed incorrectly in terminals with display encoding different from UTF-8.
* Speed of writing text files with [to_file](https://acbbullock.github.io/IO-Fortran-Library/doc/page/Ref/to_file.html) should now be improved for some platforms.

## License

All source code referenced is distributed under the [MIT license](https://github.com/acbbullock/IO-Fortran-Library/blob/main/LICENCE).

## Contact

For bug fixes or feature requests, feel free to open an issue at the [project repository](https://github.com/acbbullock/IO-Fortran-Library) or contact [acb.bullock@gmail.com](mailto:acb.bullock@gmail.com).
